@using Benefit.Common.Constants
@using Benefit.Common.Extensions
@model List<Benefit.Domain.Models.Message>

@for (var i = 0; i < Model.Count; i++)
{
    var className = i % 2 == 0 ? "left" : "right";
    var pullClassName = i % 2 == 0 ? "pull-left" : "pull-right";
    <li class="@className clearfix">
        <span class="chat-img @pullClassName">
            @{
    var avaUrl = string.IsNullOrEmpty(Model[i].User.Avatar) ? "avatar.jpg" : Model[i].User.Avatar;
            }
            <img src="~/Images/UserAvatar/@avaUrl" alt="User Avatar" class="img-circle" width="50" height="50" />
        </span>
        <div class="chat-body clearfix">
            @if (className == "left")
            {
                <div class="header">
                    <strong class="primary-font">@Model[i].User.FullName</strong>
                    <small class="pull-right text-muted">
                        <span class="glyphicon glyphicon-time"></span>
                        @Model[i].TimeStamp.ToLocalTimeWithFormat()
                        @if (User.IsInRole(DomainConstants.AdminRoleName))
                        {
                            <a href="#" class="glyphicon glyphicon-remove text-danger delete-message" data-message-id="@Model[i].Id"></a>
                        }
                    </small>
                </div>
            }
            else
            {
                <div class="header">
                    <small class=" text-muted"><span class="glyphicon glyphicon-time"></span>@Model[i].TimeStamp.ToLocalTimeWithFormat()</small>
                    @if (User.IsInRole(DomainConstants.AdminRoleName))
                    {
                        <a href="#" class="glyphicon glyphicon-remove text-danger delete-message" data-message-id="@Model[i].Id"></a>
                    }
                    <strong class="pull-right primary-font">@Model[i].User.FullName</strong>
                </div>
            }
            <p class="@pullClassName">
                @Model[i].Text
            </p>
        </div>
    </li>
}