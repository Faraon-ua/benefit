@using Benefit.Domain.Models
@using Benefit.Web.Helpers
@model Seller

@{
    var sellerUrl = Url.SubdomainAction(Model.UrlName, "Index", "Home", null);
    var logo = Model.Images.FirstOrDefault(entry => entry.SellerId == Model.Id && entry.ImageType == ImageType.SellerLogo);
    var logoUrl = logo == null ? "" : logo.ImageUrl;
    var address = Model.Addresses.FirstOrDefault();
    var todayShedule = Model.Schedules.FirstOrDefault(entry => entry.Day == DateTime.Now.DayOfWeek);
}

<div class="list_item_wrapp item_wrap item">
    <table class="list_item" cellspacing="0" cellpadding="0" border="0" width="100%">
        <tr class="adaptive_name">
            <td colspan="2">
                <div class="desc_name">
                    <a href="@sellerUrl">
                        <span>@Model.Name</span>
                    </a>
                </div>
            </td>
        </tr>
        <tr>
            <td class="image_block">
                <div class="stickers">
                    <div class="sticker_sale_text">@Model.UserDiscount %</div>
                </div>
                <a href="@sellerUrl" class="thumb shine">
                    <img src="~/Images/SellerLogo/@logoUrl" alt="@Model.AltText" title="@Model.Title" />
                </a>
            </td>
            <td class="description_wrapp">
                <div class="description">
                    <div class="item-title">
                        <a href="@sellerUrl" class="dark_link" style="font-size: 18px">@Model.Name</a>
                        @if (address != null)
                        {
                            <span>@string.Format("{0}, {1}", address.Region.Name_ua, address.AddressLine)</span>
                        }
                        <span class="dark_link" style="font-size: 12px">@ViewBag.SelectedSellerCategoryName</span>
                    </div>

                    <div class="preview_text">@Model.ShortSescription</div>
                </div>


                <div class="preview_text">
                    @if (todayShedule != null)
                    {
                        if (todayShedule.StartHour < DateTime.Now.Hour && todayShedule.EndHour > DateTime.Now.Hour)
                        {
                            <svg xmlns:dc="http://purl.org/dc/elements/1.1/"
                                 xmlns:cc="http://creativecommons.org/ns#"
                                 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
                                 xmlns:svg="http://www.w3.org/2000/svg"
                                 xmlns="http://www.w3.org/2000/svg"
                                 version="1.1"
                                 width="13"
                                 height="13"
                                 viewBox="0 0 15 15"
                                 id="svg17805"
                                 xml:space="preserve"><metadata id="metadata9"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><defs id="defs7" />















                            <path d="m 7.5,0.125 c -4.059,0 -7.375,3.316 -7.375,7.375 0,4.059 3.316,7.375 7.375,7.375 4.059,0 7.375,-3.316 7.375,-7.375 0,-4.059 -3.316,-7.375 -7.375,-7.375 z m 0,1.768 c 3.104,0 5.607,2.504 5.607,5.607 0,3.103 -2.504,5.607 -5.607,5.607 -3.103,0 -5.607,-2.503 -5.607,-5.607 0,-3.104 2.503,-5.607 5.607,-5.607 z"
                                  id="path4660-7-2-3-3"
                                  style="fill: #42c473" />















                            <path d="m 6.708,2.991 v 4.552 0.764 0.446 h 3.428 V 7.543 H 7.918 V 2.991 h -1.21 z"
                                  id="rect4662-1-2-3-46"
                                  style="fill: #42c473" />















                        </svg>
                            <span style="color: #42c473; font-weight: bold;">@todayShedule.StartHour:00 - @todayShedule.EndHour:00</span>
                        }
                        else
                        {
                            <svg xmlns:dc="http://purl.org/dc/elements/1.1/"
                                 xmlns:cc="http://creativecommons.org/ns#"
                                 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
                                 xmlns:svg="http://www.w3.org/2000/svg"
                                 xmlns="http://www.w3.org/2000/svg"
                                 version="1.1"
                                 width="13"
                                 height="13"
                                 viewBox="0 0 15 15"
                                 id="svg17805"
                                 xml:space="preserve"><metadata id="metadata9"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><defs id="defs7" />







                            <path d="m 7.5,0.125 c -4.059,0 -7.375,3.316 -7.375,7.375 0,4.059 3.316,7.375 7.375,7.375 4.059,0 7.375,-3.316 7.375,-7.375 0,-4.059 -3.316,-7.375 -7.375,-7.375 z m 0,1.768 c 3.104,0 5.607,2.504 5.607,5.607 0,3.103 -2.504,5.607 -5.607,5.607 -3.103,0 -5.607,-2.503 -5.607,-5.607 0,-3.104 2.503,-5.607 5.607,-5.607 z"
                                  id="path4660-7-2-3-3"
                                  style="fill: #ed1e1e" />







                            <path d="m 6.708,2.991 v 4.552 0.764 0.446 h 3.428 V 7.543 H 7.918 V 2.991 h -1.21 z"
                                  id="rect4662-1-2-3-46"
                                  style="fill: #ed1e1e" />







                        </svg>
                            <span style="color: #ed1e1e; font-weight: bold;">@todayShedule.StartHour:00 - @todayShedule.EndHour:00</span>
                        }
                    }
                    @if (Model.IsAcquiringActive)
                    {
                        <span>
                            <img src="~/Content/img/visa-mastercard.png" height="17" />
                        </span>
                    }
                    @if (Model.IsBonusesPaymentActive)
                    {
                        <span>
                            Використати бонуси
                        </span>
                    }

                </div>

            </td>
            <td style="text-align:center; padding: 15px;">
                Рейтинг постачальника
                <div class="rating">

                    <div class="iblock-vote small">
                        <table class="table-no-border">
                            <tr>
                                @for (int i = 1; i <= 5; i++)
                                {
                                    <td>
                                        <div class="star-@(i<=Model.AvarageRating.GetValueOrDefault(0)?"active":"empty") star-voted" title="@i"></div>
                                    </td>
                                }
                            </tr>
                        </table>
                    </div>
                </div>
                <br><br>

                @*<a href="#">Детальніше </a><br>
                    <a href="#"> Всі товари</a><br>*@
                <a href="@sellerUrl" class="button_block "> <span class="small to-cart btn btn-default transition_bg">Детальніше</span></a>
            </td>
        </tr>
    </table>
</div>